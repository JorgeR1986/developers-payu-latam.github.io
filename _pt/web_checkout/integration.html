---
title: Integração
subcategory: payments
---

<script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.13.0/jquery.validate.min.js"></script>
          	<script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.13.0/additional-methods.min.js"></script>
                <script src="../../js/jquery-validate.bootstrap-tooltip.min.js"></script>
          	<script src="../../js/signature-generator/validations.js"></script>
         	<script src="../../js/signature-generator/md5.js"></script>
         	<script src="../../js/signature-generator/sha1.js"></script>
         	<script src="../../js/signature-generator/sha256.js"></script>
                <script src="../../js/signature-generator/signature-generator.js"></script>
                <script>

                    var errApiKeyReq = "Por favor insira de ApiKey"
                    var errApiKeyMin = "Por favor insira mais de 5 digitos"
                    var errApiKeyMax = "Por favor insira menos de  32 digitos"
                    var errMerchantReq = "Por favor insira de Merchant Id"
                    var errMerchantMin = "Por favor insira mais de 5 digitos"
                    var errMerchantMax = "Por favor insira menos de 7 digitos"
                    var errMerchantPosi = "Por favor insira um número positivo"
                    var errMerchantNum = "Por favor insira apenas números"
                    var errReferenceReq = "Por favor insira de Reference Code"
                    var errReferenceMin = "Por favor insira de Reference Code"
                    var errReferenceMax = "Por favor insira menos de 255 digitos"
                    var errAmountReq = "Por favor insira o valor"
                    var errAmountMin = "Por favor insira o valor"
                    var errAmountMax = "Por favor insira menos de 14 digitos"
                    var errAmountPosi = "Por favor insira um número positivo"
                    var errAmountNum = "Por favor insira apenas números"
                    var errCurrReq = "Por favor insira um valor de moeda válida no formato ISO 4217"
                    var errCurrMin = "Por favor insira mais de 3 digitos"
                    var errCurrMax = "Por favor insira mais de 3 digitos"
                    var errTsReq = "Por favor insira o código de transação"
                    var errTsMin = "Por favor insira o código de transação"
                    var errTsMax = "Por favor insira menos de 3 digitos"
                    var errSpReq = "Por favor insira o código de transação"
                    var errSpMin = "Por favor insira o código de transação"
                    var errSpMax = "Por favor insira menos de 1 digito"

                </script>

<div class="payu-page-header superhero-sticky">
<h1 class="payu-title1 bgreen">Integração webcheckout</h1>

</div>

<div class="sh-container payu-white-bg">
<div class="container">
<div class="row" style="background-color: #f5f5f5;">

{% include sidemenu_webcheckout_pt.html %}
<div id="page-menu-column2">
<br>
Para a operação geral dos componentes da integração Webchekcout ir para a <a href="{{ site.baseurl }}/pt/web_checkout/">página de introdução</a>.
<br><br>
Aqui você encontrará os componentes para realizar a integração Webcheckout.


<div class="squelch-taas-tab-group squelch-taas-override" data-title="" data-disabled="false" data-collapsible="false" data-active="0" data-event="click">
	<ul>
		<li class="squelch-taas-tab"><a href="#squelch-taas-tab-content-1">1. Formulário de pagamento</a></li>
		<li class="squelch-taas-tab"><a href="#squelch-taas-tab-content-2">2. Página de resposta</a></li>
		<li class="squelch-taas-tab"><a href="#squelch-taas-tab-content-3">3. Página de confirmação</a></li>

	</ul>
<div id="squelch-taas-tab-content-1">
<div id="formulario-de-pago" class="payu-fragment">
<span class="subtitle-page">Formulário de pagamento</span>
<span class="grey-text-13">Nesta sessão você verá como enviar os dados de uma transação para a PayU.
Você deve gerar um formulário HTML com os dados da transação utilizando o método HTTP POST e que aponte para o nosso sistema.</span><br>

<div id="blue-box">
<div id="info-box">Ter em conta:</div>
<ol>

<li class="bullet-box">Certifique-se de que você tem o merchantld, o accountId e apiKey correta.</li>
<li class="bullet-box">Tenha cuidado para não incluir espaços nos valores dos parâmetros.</li>
<li class="bullet-box">Não envie os valores com mais de duas casas decimais.</li>
<li class="bullet-box">Use uma referência de pagamento diferente para cada pagamento.</li>
<li class="bullet-box">Não use caracteres especiais no parâmetro "referenceCode".</li>


</ol>
</div>
&nbsp;<br>
Exemplo <b>HTML</b> com alguns parâmetros que você pode enviar:
<pre><code>
 &lt;form method=&quot;post&quot; action=&quot;https://sandbox.checkout.payulatam.com/ppp-web-gateway-payu/&quot;&gt;
&nbsp;&nbsp;&lt;input name=&quot;<span class="highlight-txt2">merchantId</span>&quot;    type=&quot;hidden&quot;  value=&quot;<span class="highlight-txt2">508029</span>&quot;   &gt;
&nbsp;&nbsp;&lt;input name=&quot;<span class="highlight-txt2">accountId</span>&quot;     type=&quot;hidden&quot;  value=&quot;<span class="highlight-txt2">512321</span>&quot; &gt;
&nbsp;&nbsp;&lt;input name=&quot;<span class="highlight-txt2">description</span>&quot;   type=&quot;hidden&quot;  value=&quot;<span class="highlight-txt2">Test PAYU</span>&quot;  &gt;
&nbsp;&nbsp;&lt;input name=&quot;<span class="highlight-txt2">referenceCode</span>&quot; type=&quot;hidden&quot;  value=&quot;<span class="highlight-txt2">TestPayU</span>&quot; &gt;
&nbsp;&nbsp;&lt;input name=&quot;<span class="highlight-txt2">amount</span>&quot;        type=&quot;hidden&quot;  value=&quot;<span class="highlight-txt2">20000</span>&quot;   &gt;
&nbsp;&nbsp;&lt;input name=&quot;<span class="highlight-txt2">tax</span>&quot;           type=&quot;hidden&quot;  value=&quot;<span class="highlight-txt2">3193</span>&quot;  &gt;
&nbsp;&nbsp;&lt;input name=&quot;<span class="highlight-txt2">taxReturnBase</span>&quot; type=&quot;hidden&quot;  value=&quot;<span class="highlight-txt2">16806</span>&quot; &gt;
&nbsp;&nbsp;&lt;input name=&quot;<span class="highlight-txt2">currency</span>&quot;      type=&quot;hidden&quot;  value=&quot;<span class="highlight-txt2">COP</span>&quot; &gt;
&nbsp;&nbsp;&lt;input name=&quot;<span class="highlight-txt2">signature</span>&quot;     type=&quot;hidden&quot;  value=&quot;<span class="highlight-txt2">7ee7cf808ce6a39b17481c54f2c57acc</span>&quot;  &gt;
&nbsp;&nbsp;&lt;input name=&quot;<span class="highlight-txt2">test</span>&quot;          type=&quot;hidden&quot;  value=&quot;<span class="highlight-txt2">0/span>&quot; &gt;
&nbsp;&nbsp;&lt;input name=&quot;<span class="highlight-txt2">buyerEmail</span>&quot;    type=&quot;hidden&quot;  value=&quot;<span class="highlight-txt2">test@test.com</span>&quot; &gt;
&nbsp;&nbsp;&lt;input name=&quot;<span class="highlight-txt2">responseUrl</span>&quot;    type=&quot;hidden&quot;  value=&quot;<span class="highlight-txt2">http://www.test.com/response</span>&quot; &gt;
&nbsp;&nbsp;&lt;input name=&quot;<span class="highlight-txt2">confirmationUrl</span>&quot;    type=&quot;hidden&quot;  value=&quot;<span class="highlight-txt2">http://www.test.com/confirmation</span>&quot; &gt;
&nbsp;&nbsp;&lt;input name=&quot;<span class="highlight-txt2">Submit</span>&quot;        type=&quot;submit&quot;  value=&quot;<span class="highlight-txt2">Enviar</span>&quot; &gt;
&lt;/form&gt;
</code></pre>
&nbsp;<br>
<span class="grey-text-13"><strong>Nota</strong>: Caso seja um comércio que faça o envio de produtos, deverá enviar no formulário de pagamento as seguintes variáveis:</span>
<div id="blue-box">
    <span class="grey-text-13">
        &nbsp;&nbsp;&lt;input name="<span class="highlight-txt2">shippingAddress</span>"    type="hidden"  value="<span class="highlight-txt2">calle 93 n 47 - 65</span>" &gt;
         <br>
        &nbsp;&nbsp;&lt;input name="<span class="highlight-txt2">shippingCity</span>"    type="hidden"  value="<span class="highlight-txt2">Bogota</span>" &gt;
         <br>
        &nbsp;&nbsp;&lt;input name="<span class="highlight-txt2">shippingCountry</span>"    type="hidden"  value="<span class="highlight-txt2">CO</span>" &gt;
         <br>
    </span>
</div>
<p>&nbsp;<br>
<span class="grey-text-13">Uma vez que você gere o formulário HTML deverá apontar para a seguinte URL:</span>
<div id="blue-box">
<span class="grey-text-13">Testes: <b>https://sandbox.checkout.payulatam.com/ppp-web-gateway-payu/</b><br><br>
Produção: <b>https://checkout.payulatam.com/ppp-web-gateway-payu/</b></span>
</div>
<p>&nbsp;<br>

<div class="squelch-taas-toggle squelch-taas-override" data-speed="800" data-active="" data-theme="jqueryui" >

<h3 >
<a href="">
Estes são os dados mínimos de envio</a></h3><div class="squelch-taas-toggle-shortcode-content" >
<table class="table-d" >
<tr bgcolor="#696a6c">
<td><span style="color: #fff; font-weight: bold;">Campo</span></td>
<td><span style="color: #fff; font-weight: bold;">Tipo</span></td>
<td><span style="color: #fff; font-weight: bold;">Tamanho</span></td>
<td><span style="color: #fff; font-weight: bold;">Descrição</span></td>
<td><span style="color: #fff; font-weight: bold;">Obrigatório em:</span></td>
</tr>
<tr>
<td><em>merchantId</em></td>
<td>Numérico</td>
<td style="text-align: center;">12</td>
<td>É o número identificador da loja no sistema da PAYU, este número você encontrará no e-mail de criação da conta.</td>
<td>Todos os países</td>
</tr>
<tr>
<td><em>referenceCode</em></td>
<td>Alfa numérico</td>
<td style="text-align: center;">255</td>
<td>É a referência da venda ou pedido. Deve ser único para cada transação que será enviada ao sistema. Normalmente é uma forma para que você identifique os pedidos que serão enviados para a plataforma de pagamentos.</td>
<td>Todos os países</td>
</tr>
<tr>
<td><em>description </em></td>
<td>Alfa numérico</td>
<td style="text-align: center;">255</td>
<td>É a descrição da venda.</td>
<td>Todos os países</td>
</tr>
<tr>
<td><em>amount</em></td>
<td>Numérico</td>
<td style="text-align: center;">14,2</td>
<td>É a quantidade total da transação. Pode conter dois dígitos decimais. Ex. 10000.00 ou 10000.</td>
<td>Todos os países</td>
</tr>
<tr>
<td><em>tax </em></td>
<td>Numérico</td>
<td style="text-align: center;">14,2</td>
<td>É o valor do IVA (somente válido para Colômbia). Caso não haja IVA deve ser enviado como 0.</td>
<td>Todos os países</td>
</tr>
<tr>
<td><em>taxReturnBase</em></td>
<td>Numérico</td>
<td style="text-align: center;">32</td>
<td>É o valor base sobre qual é calculado o IVA (somente válido para Colômbia). Caso não haja IVA deve ser enviado como 0.</td>
<td>Todos os países</td>
</tr>
<tr>
<td><em>signature</em></td>
<td>Alfa numérico</td>
<td style="text-align: center;">255</td>
<td>É a assinatura digital criada para cada uma das transações.</td>
<td>Todos os países</td>
</tr>
<tr>
<td><em>accountId</em></td>
<td>Numérico</td>
<td style="text-align: center;">6</td>
<td>Identificador da conta do usuário para cada país que tenha associado à loja, ao enviá-la se desdobrarão somente os meios de pagamento pertencentes a este país. </td>
<td align="center">Todos os países</td>
</tr>
<tr>
<td><em><a class="green-link" href="{{ site.baseurl }}/pt/web_checkout/variables.html?opened_div=06">currency</a></em></td>
<td>Alfa numérico</td>
<td style="text-align: center;">3</td>
<td>A moeda respectiva na qual será realizado o pagamento. O processo de conciliação é feito em pesos e a taxa representativa do dia.</td>
<td>Todos os países</td>
</tr>
<tr>
<td><i>buyerFullName</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">150</td>
<td>Nome completo do comprador.</td>
<td>Todos os países</td>
</tr>
<tr>
<td><em>buyerEmail</em></td>
<td>Alfa numérico</td>
<td style="text-align: center;">255</td>
<td>Campo que contém o e-mail do comprador para notifica o resultado da transação por e-mail. Recomenda-se validar se este dado é tomado em um formulário.</td>
<td>Todos os países</td>
</tr>
<tr>
<td><i>shippingAddress</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">255</td>
<td>O endereço da entrega da mercadoria.</td>
<td>Todos os países</td>
</tr>
<tr>
<td><i>shippingCity</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">50</td>
<td>A Cidade de entrega da mercadoria.</td>
<td>Todos os países</td>
</tr>
<tr>
<td><i>shippingCountry</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">2</td>
<td>O código ISO do país de entrega da mercadoria.</td>
<td>Todos os países</td>
</tr>
<tr>
<td><i>telephone</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">50</td>
<td>O telefone de residência do comprador.</td>
<td>Todos os países</td>
</tr>
</table>
</div></div>
<div class="squelch-taas-toggle squelch-taas-override" data-speed="800" data-active="" data-theme="jqueryui" >
<h3 >
<a href="">
Todas as variáveis que podem ser enviadas no formulário</a></h3><div class="squelch-taas-toggle-shortcode-content" >
<table class="table-d" >
<tr bgcolor="#696a6c">
<td><span style="color: #fff; font-weight: bold;">Campo</span></td>
<td><span style="color: #fff; font-weight: bold;">Tipo</span></td>
<td><span style="color: #fff; font-weight: bold;">Tamanho</span></td>
<td><span style="color: #fff; font-weight: bold;">Descrição</span></td>
<td><span style="color: #fff; font-weight: bold;">Obrigatório em:</span></td>
</tr>
<tr>
<td><i>amount</i></td>
<td>Numérico</td>
<td style="text-align: center;">14</td>
<td>É a quantidade total da transação. Pode conter dois dígitos decimais. Ex. 10000.00 ou 10000.</td>
<td>Todos os países</td>
</tr>
<tr>
<td><i>merchantId</i></td>
<td>Numérico</td>
<td style="text-align: center;">12</td>
<td>É o número identificador da sua loja no sistema de PAYU, este número será encontrado no e-mail de criação da conta.</td>
<td>Todos os países</td>
</tr>
<tr>
<td><i>referenceCode</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">255</td>
<td>É a referência da venda ou pedido. Deve ser único para cada transação que será enviada ao sistema. Normalmente é uma forma para que você identifique os pedidos que serão enviados para a plataforma de pagamentos.</td>
<td>Todos os países</td>
</tr>
<tr>
<td><i>accountId</i></td>
<td>Numérico</td>
<td style="text-align: center;">6</td>
<td>Identificador da conta do usuário para cada país que tenha associado a loja, ao enviá-la aparecem somente os meios de pagamento pertencentes a tal país.</td>
<td align="center">Todos os países</td>
</tr>
<tr>
<td><i>description</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">255</td>
<td>É a descrição da venda.</td>
<td>Todos os países</td>
</tr>
<tr>
<td><i>tax</i></td>
<td>Numérico</td>
<td style="text-align: center;">14,2</td>
<td>É o valor do IVA da transação, se o IVA é enviado nulo o sistema aplicará 19% automaticamente. Pode conter dois dígitos decimais. Ex: 19000.00. Caso não tenha IVA deve ser enviado como 0.</td>
<td>Todos os países</td>
</tr>
<tr>
<td><em>taxReturnBase</em></td>
<td>Numérico</td>
<td style="text-align: center;">14,2</td>
<td>É o valor base sobre o qual deve ser calculado o IVA. Caso não exista o  IVA deve ser enviado como 0.</td>
<td>Todos os países</td>
</tr>
<tr>
<td><i>signature</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">255</td>
<td>É a assinatura digital criada para cada uma das transações.</td>
<td>Todos os países</td>
</tr>
<tr>
<td><em><a class="green-link" href="{{ site.baseurl }}/pt/web_checkout/variables.html?opened_div=06">currency</a></em></td>
<td>Alfa numerico</td>
<td style="text-align: center;">3</td>
<td>A moeda respectiva na qual foi realizado o pagamento. O processo de conciliação é feito em pesos na taxa representativa do dia.</td>
<td>Todos os países</td>
</tr>
<tr>
<td><i>test</i></td>
<td>Numérico</td>
<td style="text-align: center;">1</td>
<td>Variável para poder utilizar cartões de crédito de testes, os valores podem ser 1 ou 0.</td>
<td style="text-align: center;" valign="top" width="80">&#8212;</td>
</tr>
<tr>
<td><i>buyerEmail</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">255</td>
<td>Campo que contém o e-mail do comprador para notificar o resultado da transação por e-mail. Recomenda-se que seja feita uma validação se este dado é tomado em um formulário.</td>
<td>Todos os países</td>
</tr>
<tr>
<td><i><a class="green-link" href="{{ site.baseurl }}/pt/web_checkout/variables.html?opened_div=07">lng</a></i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">3</td>
<td>Idioma no qual se deseja mostrar a plataforma de pagamentos.</td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i>extra1 </i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">255</td>
<td>Campo adicional para enviar informação sobre a compra. Ex. Descrição da compra caso seja desejável visualizá-la página de confirmação.</td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i>extra2</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">255</td>
<td>Campo adicional para enviar informação sobre a compra. Ex. Códigos internos dos produtos.</td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i>responseUrl</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">255</td>
<td>A url da página de resposta.</td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i>confirmationUrl</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">255</td>
<td>A url da página de confirmação.</td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i>payerFullName</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">50</td>
<td>O nome do pagador. Este valor será tomado para completar o formulário dos cartões de crédito.</td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i>payerDocument</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">25</td>
<td>O número de identificação do comprador. Este valor será tomado para completar o formulário dos cartões de crédito.</td>
<td style="text-align: center;" width="80">&#8212;</td>
</tr>
<tr>
<td><i>mobilePhone</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">50</td>
<td>O número celular do comprador. Este valor será tomado para completar o formulário dos cartões de crédito e será o telefone de contato.</td>
<td style="text-align: center;" width="80">&#8212;</td>
</tr>
<tr>
<td><i>billingAddress</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">255</td>
<td>O endereço da correspondência.</td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i>shippingAddress</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">255</td>
<td>O endereço da entrega da mercadoria.</td>
<td>Todos os países</td>
</tr>
<tr>
<td><i>telephone</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">50</td>
<td>O telefone de residência do comprador.</td>
<td>Todos os países</td>
</tr>
<tr>
<td><i>officeTelephone</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">50</td>
<td>O telefone diurno do comprador.</td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i>algorithmSignature</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">255</td>
<td>Algorítmo decifrado da assinatura digital (signature). Os três algoritmos disponíveis são MD5, SHA e SHA256.</td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i>extra3</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">255</td>
<td>Campo adicional para enviar informação sobre a compra. Ex. Códigos internos dos produtos.</td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i>billingCity</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">50</td>
<td>Cidade associada ao endereço de faturamento.</td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i>shippingCity</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">50</td>
<td>A Cidade de entrega da mercadoria.</td>
<td>Todos os países</td>
</tr>
<tr>
<td><i>zipCode</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">20</td>
<td>Código postal.</td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i>billingCountry</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">2</td>
<td>O código ISO do país associado ao endereço da faturação.</td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i>shippingCountry</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">2</td>
<td>O código ISO do país de entrega da mercadoria.</td>
<td>Todos os países</td>
</tr>
<tr>
<td><i>buyerFullName</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">150</td>
<td>Nome completo do comprador.</td>
<td>Todos os países</td>
</tr>
<tr>
<td><i>payerEmail</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">255</td>
<td>Email do pagador.</td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i>payerPhone</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">20</td>
<td>Número residencial do pagador.</td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i>payerOfficePhone</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">20</td>
<td>Número comercial do pagador.</td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i>payerMobilePhone</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">20</td>
<td>Numero celular do pagador.</td>
<td style="text-align: center;">&#8212;</td>
</tr>
</table>
</div></div>
<br/>
<span class="blue-text-13"><b>Considerações sobre as Variáveis</b></span>
<ol>
<li class="bullet-box">A <b>tax</b> é um imposto ao valor agregado que alguns países podem utilizar e a <b>taxReturnBase</b> é o valor base sobre o qual é calculado o IVA. Caso seu produto não tenha esse imposto aplicado, simplesmente ambas as variáveis tomarão como valor 0 <b>(tax=0, taxReturnBase=0)</b>. Caso contrário, se alguns elementos têm o imposto e para outros este não se aplica, você terá que realizar o seguinte cálculo para saber como enviar os valores para a plataforma de pagamentos:</li>
<li class="bullet-box">Se não é enviado o valor <b>tax</b> o sistema calculará automaticamente como 19%.</li>
<li class="bullet-box">Para contas da Colômbia registradas como regime comum, se o valor <b>tax</b>, não é enviado, o sistema calculará automaticamente o valor. Se a sua conta pertence ao regime simplificado e não envia o valor <b>tax</b>, oo sistema deixará o valor como Zero (0)<br><br/>
<span class="blue-text-13">Nota: A quantidade de tax + taxReturnBase não pode ser maior que o Valor Total</span>
<table class="table-d" >
<tr bgcolor="#696a6c">
<td><span style="color: #fff; font-weight: bold;">Producto</span></td>
<td><span style="color: #fff; font-weight: bold;">taxReturnBase</span></td>
<td><span style="color: #fff; font-weight: bold;">tax</span></td>
<td><span style="color: #fff; font-weight: bold;">Amount</span></td>
</tr>
<tr>
<td><i>A</i></td>
<td>84.033</td>
<td>15.966 (19%)</td>
<td>100.000</td>
</tr>
<tr>
<td><i>B</i></td>
<td>181.818</td>
<td>18.181 (10%)</td>
<td>200.000</td>
</tr>
<tr>
<td><i>C</i></td>
<td>0</td>
<td>0 (0%)</td>
<td>150.000</td>
</tr>
<tr>
<td><i>Total</i></td>
<td>268.851</td>
<td>34.147</td>
<td>450.000</td>
</tr>
</table>
</li>
<li class="bullet-box">O <b>signature</b> é uma forma única de validação dos pagamentos realizados através da plataforma, garantindo sua autenticidade. Consiste em uma cadeia de caracteres para a qual é aplicado o algoritmo MD5, SHA ou SHA256 para criptografá-la. A cadeia está composta da seguinte forma:
<pre>
“ApiKey~merchantId~referenceCode~amount~currency”.
</pre>
<span class="grey-text-13">Por exemplo:</span>
<pre>
merchantId: 508029
ApiKey: 4Vj8eK4rloUd272L48hsrarnUA
referenceCode: TestPayU
amount: 20000
currency: COP
accountId: 512326
buyerEmail: test@test.com
</pre>
<span class="grey-text-13">A assinatura seria composta pelos seguintes elementos:</span>
<pre>
"4Vj8eK4rloUd272L48hsrarnUA~508029~TestPayU~20000~COP"
</pre>
<span class="grey-text-13">Caso o algoritmo <b>MD5</b> fosse aplicado, ficaria assim:</span>
<pre>
"7ee7cf808ce6a39b17481c54f2c57acc"
</pre>
<span class="grey-text-13">Com <b>SHA1</b>:</span>
<pre>
"fa890d3f94e12b5cdb62e8771453b99b78e7ccdc"
</pre>
<span class="grey-text-13">Com <b>SHA256</b>:</span>
<pre>
"af3899a22336b79db46006491d15813158826f944599bf3bf601e2327f898022"
</pre>
</li>
</ol>
</div>

    <!-- Generador de firmas -->
<div id="blue-box">
<span class="subtitle-page">Compare a sua assinatura</span>
<br>
<br>
<span class="grey-text-13">
<div id = "div_generador" >

<form method="POST" id="signature_form" >
    <table>
        <span class="blue-text-13"><b>Algoritmo: &nbsp;</b></span>
        <select id = "signature_algorithm" class="calc_selector form_control">
            <option  value="md5">MD5</option>
            <option  value="sha1">SHA1</option>
            <option  value="sha256">SHA256</option>
        </select>
        <br>
        <br>
        <span class="calc_text">&nbsp;(</span>
        <input class="form_control" type="text"  id ="signature_apikey" name = "signature_apikey" placeholder="ApiKey" maxlength="26"> ~
        <input class="form_control number" type="text"  id ="signature_merchanId" name = "signature_merchanId" placeholder="MerchantId" maxlength="7"> ~
        <input class="form_control" type="text"  id ="signature_referenceCode" name = "signature_referenceCode" placeholder="Referencia" maxlength="255"> ~
        <input class="form_control  number" type="text" id ="signature_amount" name = "signature_amount" placeholder="Valor" maxlength="14"> ~
        <select id = "signature_currency" class="calc_selector form_control" >
            <option  value="USD">USD</option>
            <option  value="COP">COP</option>
            <option  value="MXN">MXN</option>
            <option  value="ARS">ARS</option>
            <option  value="PEN">PEN</option>
            <option  value="BRL">BRL</option>
            <option  value="CLP">CLP</option>
        </select>
        <span class="calc_text">)</span>
        <br>
        <br>
        <br>
        <span class="blue-text-13"><b>Resultado:&nbsp;</b></span><input class="form_control" id ="signature_generated" name = "signature_generated" value = ""  readonly />
    </table>
    <br>
    <table width="50%"  border="0" cellspacing="2" cellpadding="2">
        <input type="button" name="signature_generate" id="signature_generate" value="gerar assinatura" >
        <input type="button" name="signature_generate_again" id="signature_generate_again" value="Gerar nova assinatura" >
    </table>
</form>
</div>
</span>
</div>
<!-- Fin del generador de firmas-->

</div>
<!--fin integracion -->

<!--pagina de respuesta -->
<div id="squelch-taas-tab-content-2">

<div id="pagina-respuesta" class="payu-fragment">
<span class="subtitle-page">Página de resposta</span>
<span class="grey-text-13">Ao finalizar uma transação, nosso sistema enviará ao pagador a página de resposta. Para esta página nosso sistema enviará a informação sobre o estado de uma transação através do método HTTP GET.<br/><br/>

Se você quiser que a PayU sempre exiba as informações da operação, certifique-se de não enviar nada no parâmetro "responseURL" no formulário de pagamento e <a href="{{ site.baseurl }}/pt/administrative_module/configuration.html" class="green-link">deixar em branco no Biz PayU</a>. Observe que, nesse caso, o usuário não terá a opção de retornar ao seu site.</span>


<div id="blue-box">
<div id="info-box">Ter em conta:</div>
<ol>

<li class="bullet-box">Alguns provedores de hospedagem têm configurações que não permitem o envio de URLs como valores de parâmetros. exemplo: &amp;merchant_url=http%3A%2F%2Fwww.lamiradaoptica.com </li>
<li class="bullet-box">Para contas do Brasil, não ha redirecionamento para a página de resposta..</li>
<li class="bullet-box">Não dependa da página de resposta para atualizar seu banco de dados ou executar processos porque é possível que o usuário não volte para o mesmo; por favor usar a página de confirmação.</li>
<li class="bullet-box">Se você deseja exibir informações relacionadas com a transação, sugerimos mostrar pelo menos o seguinte: valor de referência de estado, moeda e data.</li>
<li class="bullet-box">Você deve enviar o parâmetro "responseURL" no fomulário de pagamento ou  <a href="{{ site.baseurl }}/pt/administrative_module/configuration.html">defini-lo na PayU Biz</a>; tem prioridade o parâmetro enviado. Se PayU não encontra nenhum dado, então o processo de pagamento termina no Webcheckout. </li>


</ol>
</div>

&nbsp;<br>

<span class="grey-text-13">A seguir um exemplo em <b>PHP</b> com a integração através de método HTTP GET. </span>
<pre style="height:350px; overflow: auto;">
&lt;?php
$ApiKey = &quot;4Vj8eK4rloUd272L48hsrarnUA&quot;;
$merchant_id = $_REQUEST['merchantId'];
$referenceCode = $_REQUEST['referenceCode'];
$TX_VALUE = $_REQUEST['TX_VALUE'];
$New_value = number_format($TX_VALUE, 1, '.', '');
$currency = $_REQUEST['currency'];
$transactionState = $_REQUEST['transactionState'];
$firma_cadena = &quot;$ApiKey~$merchant_id~$referenceCode~$New_value~$currency~$transactionState&quot;;
$firmacreada = md5($firma_cadena);
$firma = $_REQUEST['signature'];
$reference_pol = $_REQUEST['reference_pol'];
$cus = $_REQUEST['cus'];
$extra1 = $_REQUEST['description'];
$pseBank = $_REQUEST['pseBank'];
$lapPaymentMethod = $_REQUEST['lapPaymentMethod'];
$transactionId = $_REQUEST['transactionId'];

if ($_REQUEST['transactionState'] == 4 ) {
	$estadoTx = &quot;Transa&ccedil;&atilde;o aprovada&quot;;
}

else if ($_REQUEST['transactionState'] == 6 ) {
	$estadoTx = &quot;Transa&ccedil;&atilde;o rejeitada&quot;;
}

else if ($_REQUEST['transactionState'] == 104 ) {
	$estadoTx = &quot;Erro&quot;;
}

else if ($_REQUEST['transactionState'] == 7 ) {
	$estadoTx = &quot;Transa&ccedil;&atilde;o em andamento&quot;;
}

else {
	$estadoTx=$_REQUEST['mensaje'];
}


if (strtoupper($firma) == strtoupper($firmacreada)) {
?&gt;
	&lt;h2&gt;Resumo da transa&ccedil;&atilde;o&lt;/h2&gt;
	&lt;table&gt;
	&lt;tr&gt;
	&lt;td&gt;Status da Transa&ccedil;&atilde;o&lt;/td&gt;
	&lt;td&gt;&lt;?php echo $estadoTx; ?&gt;&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
	&lt;tr&gt;
	&lt;td&gt;ID da transa&ccedil;&atilde;o&lt;/td&gt;
	&lt;td&gt;&lt;?php echo $transactionId; ?&gt;&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
	&lt;td&gt;Refer&ecirc;ncia da venda&lt;/td&gt;
	&lt;td&gt;&lt;?php echo $reference_pol; ?&gt;&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
	&lt;td&gt;Refer&ecirc;ncia da transa&ccedil;&atilde;o&lt;/td&gt;
	&lt;td&gt;&lt;?php echo $referenceCode; ?&gt;&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
	&lt;?php
	if($pseBank != null) {
	?&gt;
		&lt;tr&gt;
		&lt;td&gt;cus &lt;/td&gt;
		&lt;td&gt;&lt;?php echo $cus; ?&gt; &lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
		&lt;td&gt;Banco &lt;/td&gt;
		&lt;td&gt;&lt;?php echo $pseBank; ?&gt; &lt;/td&gt;
		&lt;/tr&gt;
	&lt;?php
	}
	?&gt;
	&lt;tr&gt;
	&lt;td&gt;Valor total&lt;/td&gt;
	&lt;td&gt;$&lt;?php echo number_format($TX_VALUE); ?&gt;&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
	&lt;td&gt;Moeda&lt;/td&gt;
	&lt;td&gt;&lt;?php echo $currency; ?&gt;&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
	&lt;td&gt;Descri&ccedil;&atilde;o&lt;/td&gt;
	&lt;td&gt;&lt;?php echo ($extra1); ?&gt;&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
	&lt;td&gt;Entidade:&lt;/td&gt;
	&lt;td&gt;&lt;?php echo ($lapPaymentMethod); ?&gt;&lt;/td&gt;
	&lt;/tr&gt;
	&lt;/table&gt;
&lt;?php
}
else
{
?&gt;
	&lt;h1&gt;Erro ao validar a assinatura digital.&lt;/h1&gt;
&lt;?php
}
?&gt;
</pre>
<span class="blue-text-13">Nota: No exemplo anterior, substituir o código <b>APIKEY</b> pelo qual será encontrado em seu Módulo Administrativo.</span>
<div class="squelch-taas-toggle squelch-taas-override" data-speed="800" data-active="" data-theme="jqueryui" >
<h3 >
<a href="">
Variáveis que serão enviadas para a página de resposta</a></h3><div class="squelch-taas-toggle-shortcode-content" >
<table class="table-d" >
<tr bgcolor="#696a6c">
<td><span style="color: #fff; font-weight: bold;">Campo</span></td>
<td><span style="color: #fff; font-weight: bold;">Tipo</span></td>
<td><span style="color: #fff; font-weight: bold;">Tamanho</span></td>
<td><span style="color: #fff; font-weight: bold;">Descrição</span></td>
<td><span style="color: #fff; font-weight: bold;">Requisitado em</span></td>
</tr>
<tr>
<td><i>merchantId</i></td>
<td>Numérico</td>
<td style="text-align: center;">12</td>
<td>É o número identificador da loja no sistema da PAYU, este número você encontrará no e-mail de criação da conta.</td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i><a class="green-link" href="{{ site.baseurl }}/pt/web_checkout/variables.html?opened_div=01">transactionState</a></i></td>
<td>Numérico</td>
<td style="text-align: center;">2</td>
<td>Indica o estado da transação no sistema.</td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i>risk</i></td>
<td>Decimal (#.00)</td>
<td style="text-align: center;">&#8212;</td>
<td>O risco associado à transação. Toma un valor entre 0 e 1. O risco maior de valor. Está no formato ###.00 </td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i><a class="green-link" href="{{ site.baseurl }}/pt/web_checkout/variables.html?opened_div=01">polResponseCode</a></i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">64</td>
<td>O código de resposta.</td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i>referenceCode</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">50</td>
<td>É a referência da venda ou pedido. Dever ser único para cada transação que será enviada ao sistema.</td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i>reference_pol</i></td>
<td>
<p align="center">Alfa numérico</p>
</td>
<td style="text-align: center;">255</td>
<td>A referência ou número da transação gerada na PAYU.</td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i>signature</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">255</td>
<td>É a assinatura digital criada para cada uma das transações.</td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i>polPaymentMethod</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">255</td>
<td>O identificador interno do meio de pagamento utilizado.</td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i><a class="green-link" href="{{ site.baseurl }}/pt/web_checkout/variables.html?opened_div=08">polPaymentMethodType</a></i></td>
<td>Numérico</td>
<td style="text-align: center;">2</td>
<td>É o tipo de meio de pagamento utilizado para o pagamento.</td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i>installmentsNumber</i></td>
<td>Numérico</td>
<td style="text-align: center;">2</td>
<td>Número de parcelas nas quais foi diferido o pagamento com o cartão de crédito.</td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i>TX_VALUE</i></td>
<td>Numérico</td>
<td style="text-align: center;">14,2</td>
<td>É a quantidade total da transação. Pode conter dois dígitos decimais. Ex. 10000.00 ou 10000</td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i>TX_TAX</i></td>
<td>Numérico</td>
<td style="text-align: center;">14,2</td>
<td>É o valor do IVA da transação, se o IVA é nulo o sistema aplicará 19% automaticamente. Pode conter dois dígitos decimais. Ex: 19000.00. Se não tiver IVA deve ser enviado como 0.</td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i>buyerEmail</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">255</td>
<td>Campo que contém o e-mail do comprador para notificar o resultado da transação por e-mail eletrônico. Recomenda-se que seja feita uma validação para tomar este dado no formulário.</td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i>processingDate</i></td>
<td>Fecha (YYYY-MM-DD HH:mm:ss)</td>
<td style="text-align: center;">&#8212;</td>
<td>A data em que foi realizada a transação.</td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i>currency</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">3</td>
<td>A moeda respectiva onde foi realizado o pagamento. O processo de conciliação é feito em pesos na taxa representativa do dia.</td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i>cus</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">255</td>
<td>O cus, código único de seguimento, é a referência do pagamento dentro do Banco, aplicado apenas para pagamentos com PSE.</td>
<td>Somente se aplica para <br>PSE Colômbia</td>
</tr>
<tr>
<td><i>pseBank</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">255</td>
<td>O nome do banco, aplicável apenas para pagamentos com PSE.</td>
<td>Somente se aplica para <br>PSE Colômbia</td>
</tr>
<tr>
<td><i>lng</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">2</td>
<td>Idioma no qual se deseja mostrar a plataforma de pagamentos</td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i>description</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">255</td>
<td>É a descrição da venda. </td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i><a class="green-link" href="{{ site.baseurl }}/pt/web_checkout/variables.html?opened_div=01">lapResponseCode</a></i></td>
<td>Alfa numéric</td>
<td style="text-align: center;">64</td>
<td>Código de resposta que entrega PAYU.</td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i>lapPaymentMethod</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">255</td>
<td>Meio de pagamento com o qual foi feito o pagamento, por exemplo, VISA.</td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i>lapPaymentMethodType</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">255</td>
<td>Tipo de meio de pagamento com o qual é realizado  por exemplo CREDIT_CARD</td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i><a class="green-link" href="{{ site.baseurl }}/pt/web_checkout/variables.html?opened_div=01">lapTransactionState</a></i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">32</td>
<td>Ver estados da transação</td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i>message</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">255</td>
<td>Descrição do estado da transação.</td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i>extra1</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">255</td>
<td>Campo adicional para enviar informação sobre a compra. Ex. Descrição da compra no caso de querer visualizá-la em nossa página de resposta.</td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i>extra2</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">255</td>
<td>Campo adicional para enviar informação sobre a compra. Ex. Códigos internos dos produtos. </td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i>extra3</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">255</td>
<td>Campo adicional para enviar informação sobre a compra. Ex. Códigos internos dos produtos.</td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i>authorizationCode</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">12</td>
<td>Código de autorização da venda.</td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i>merchant_address</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">255</td>
<td>Endereço da loja.</td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i>merchant_name</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">255</td>
<td>Nome da loja.</td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i>merchant_url</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">255</td>
<td>URL do site web da loja.</td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i>orderLanguage</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">2</td>
<td>Linguagem do pedido (ISO-639-1).</td>
<td>&#8212;</td>
</tr>
<tr>
<td><i>pseCycle</i></td>
<td>Numérico</td>
<td style="text-align: center;">&#8212;</td>
<td>Identificador gerado por PSE.</td>
<td>Somente se aplica para PSE Colombia</td>
</tr>
<tr>
<td><i>pseReference1</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">255</td>
<td>Referência no. 1 para pagamentos com PSE</td>
<td>Somente se aplica para PSE Colombia</td>
</tr>
<tr>
<td><i>pseReference2</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">255</td>
<td>Referência no. 2 para pagamentos com PSE.</td>
<td>Somente se aplica para PSE Colombia</td>
</tr>
<tr>
<td><i>pseReference3</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">255</td>
<td>Referência no. 3 para pagamentos com PSE.</td>
<td>Somente se aplica para PSE Colombia</td>
</tr>
<tr>
<td><i>telephone</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">20</td>
<td>Número de telefone da loja.</td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i>transactionId</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">36</td>
<td>Identificador da transação.</td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i>trazabilityCode</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">64</td>
<td>Código de seguimento da venda no site da loja.</td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i>TX_ADMINISTRATIVE_FEE</i></td>
<td>Decimal (#.00)</td>
<td style="text-align: center;">&#8212;</td>
<td>Valor da taxa administrativa.</td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i>TX_TAX_ ADMINISTRATIVE_FEE</i></td>
<td>Decimal (#.00)</td>
<td style="text-align: center;">&#8212;</td>
<td>Valor do imposto de tarifa administrativa.</td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i><i>TX_TAX_ADMINISTRATIVE<br />
_</i></i>FEE_RETURN_BASE</td>
<td>Decimal (#.00)</td>
<td style="text-align: center;">&#8212;</td>
<td>Valor base da tarifa administrativa para a devolução </td>
<td style="text-align: center;">&#8212;</td>
</tr>
<tr>
<td><i>action_code_description *</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">255</td>
<td>Descrição dos códigos de resposta da VISANET.</td>
<td>Somente se aplica para VISANET Perú</td>
</tr>
<tr>
<td><i>cc_holder *</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">150</td>
<td>Nome do cartão titular.</td>
<td>Somente se aplica para VISANET Perú</td>
</tr>
<tr>
<td><i>cc_number *</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">&#8212;</td>
<td>Número do cartão de crédito. PAN</td>
<td>Somente se aplica para VISANET Perú</td>
</tr>
<tr>
<td><i>processing_date_time *</i></td>
<td>Fecha (YYYY-MM-DD HH:mm:ss)</td>
<td style="text-align: center;">&#8212;</td>
<td>Data e hora do processamento da venda.</td>
<td>Somente se aplica para VISANET Perú</td>
</tr>
<tr>
<td><i>request_number *</i></td>
<td>Alfa numérico</td>
<td style="text-align: center;">9</td>
<td>Número da ordem + identificador da transação.</td>
<td>Somente se aplica para VISANET Perú</td>
</tr>
</table>
</div></div>


<div class="squelch-taas-toggle squelch-taas-override" data-speed="800" data-active="" data-theme="jqueryui" >
<h3 >
<a href="">Exemplo GET enviado na página de resposta</a>
</h3>
<div class="squelch-taas-toggle-shortcode-content" >
<pre style="overflow: auto;">
http://mytestsite.com/respuesta.php?&merchantId=508029&merchant_name=Test+PayU+Test&merchant_address=Av+123+Calle+12&telephone=7512354&merchant_url=http%3A%2F%2Fpruebaslapv.xtrweb.com&transactionState=6&lapTransactionState=DECLINED&message=Declinada&referenceCode=2015-05-27+13%3A04%3A37&reference_pol=7069375&transactionId=f5e668f1-7ecc-4b83-a4d1-0aaa68260862&description=test_payu_01&trazabilityCode=&cus=&orderLanguage=es&extra1=&extra2=&extra3=&polTransactionState=6&signature=e1b0939bbdc99ea84387bee9b90e4f5c&polResponseCode=5&lapResponseCode=ENTITY_DECLINED&risk=1.00&polPaymentMethod=10&lapPaymentMethod=VISA&polPaymentMethodType=2&lapPaymentMethodType=CREDIT_CARD&installmentsNumber=1&TX_VALUE=100.00&TX_TAX=.00&amp;currency=USD&lng=es&pseCycle=&buyerEmail=test%40payulatam.com&pseBank=&pseReference1=&pseReference2=&pseReference3=&authorizationCode=&TX_ADMINISTRATIVE_FEE=.00&TX_TAX_ADMINISTRATIVE_FEE=.00&TX_TAX_ADMINISTRATIVE_FEE_RETURN_BASE=.00
</pre>
</div>
</div>
<br/>

<span class="blue-text-13"><b>Validação da firma</b></span><br><br>
<span class="grey-text-13">A validação da assinatura permite comprovar a integridade dos dados, você deverá gerar a assinatura com os dados encontrados na página de resposta e compará-la com a informação do parâmetro signature.<br>
Para validar a assinatura na página de resposta você deve levar em conta:</span><br><br>
<ol>
<li class="bullet-box">Para obter o novo valor new_value deve-se aproximar TX_VALUE sempre um decimal com o método de arredondamento "Round half to even":<br>
&nbsp;&nbsp;&nbsp;&nbsp;* Se o primeiro decimal é par e o segundo é 5, será arredondado para o valor menor.<br>
&nbsp;&nbsp;&nbsp;&nbsp;* Se o primeiro decimal é ímpar e o segundo é 5, será arredondado para o valor maior.<br>
&nbsp;&nbsp;&nbsp;&nbsp;* Em qualquer outro caso será arredondado para o decimal mais próximo.</li>
<li class="bullet-box">Os parâmetros para gerar a assinatura merchantId, referenceCode, TX_VALUE, currency e transactionState você deve obtê-los da página de resposta, e não a partir de seu banco de dados. </li>
<li class="bullet-box">Você deve ter armazenada sua ApiKey de forma segura.</li>
<li class="bullet-box">Esquema da firma:
<pre>
"ApiKey~merchantId~referenceCode~new_value~currency~transactionState"
</pre>
Exemplos:
<div class="squelch-taas-toggle squelch-taas-override" data-speed="800" data-active="" data-theme="jqueryui" >
<h3 >
<a href="">
Primeiro decimal par e o segundo 5</a></h3><div class="squelch-taas-toggle-shortcode-content" >
<span class="grey-text-13">Sua apiKey: 4Vj8eK4rloUd272L48hsrarnUA</span>
<span class="grey-text-13">Parâmetros obtidos na página de resposta:<br>
merchantId = 508029<br>
referenceCode = TestPayU04<br>
TX_VALUE = 150.25<br>
currency = USD<br>
transactionState = 6<br>
signature = 00286dc735bd9eaa8ae3a3a4cbb40688</span>
<span class="grey-text-13">A assinatura é gerada da seguinte forma:</span>
<span class="blue-text-13">MD5(4Vj8eK4rloUd272L48hsrarnUA~508029~TestPayU04~150.2~USD~6) = <b>00286dc735bd9eaa8ae3a3a4cbb40688</b></span>
</div></div>
<div class="squelch-taas-toggle squelch-taas-override" data-speed="800" data-active="" data-theme="jqueryui" >
<h3 >
<a href="">
Primeiro decimal ímpar e o segundo 5</a></h3><div class="squelch-taas-toggle-shortcode-content" >
<span class="grey-text-13">Sua apiKey: 4Vj8eK4rloUd272L48hsrarnUA</span>
<span class="grey-text-13">Parâmetros obtidos na página de resposta:
merchantId = 508029<br>
referenceCode = TestPayU04<br>
TX_VALUE = 150.35<br>
currency = USD<br>
transactionState = 6<br>
signature = 9df2bb60e2838170009040982967923f</span>

<span class="grey-text-13">A assinatura é gerada da seguinte forma:</span>
<span class="blue-text-13">MD5(4Vj8eK4rloUd272L48hsrarnUA~508029~TestPayU04~150.4~USD~6) = <b>9df2bb60e2838170009040982967923f</b></span>
</div></div>
<div class="squelch-taas-toggle squelch-taas-override" data-speed="800" data-active="" data-theme="jqueryui" >
<h3 >
<a href="">
Outros casos</a></h3><div class="squelch-taas-toggle-shortcode-content" >
<span class="grey-text-13">Sua apiKey: 4Vj8eK4rloUd272L48hsrarnUA</span>
<span class="grey-text-13">Parâmetros obtidos na página de resposta:
merchantId = 508029<br>
referenceCode = TestPayU04<br>
TX_VALUE = 150.34<br>
currency = USD<br>
transactionState = 6<br>
signature = 779f163be9347a691bcdb25064644795</span>
<span class="grey-text-13">A assinatura é gerada da seguinte forma:</span>
<span class="blue-text-13">MD5(4Vj8eK4rloUd272L48hsrarnUA~508029~TestPayU04~150.3~USD~6) = <b>779f163be9347a691bcdb25064644795</b></span>
</div></div>
</li>
</div>

    <!-- Generador de firmas pagina de respuesta -->
<div id="blue-box">
<span class="subtitle-page">Compare a sua assinatura</span>
<br>
<br>
<span class="grey-text-13">
<div>
<form method="POST" id="signature_form_response_page" >
    <table>
        <span class="blue-text-13"><b>Algoritmo: &nbsp;</b></span>
        <select id = "signature_algorithm_response_page" class="calc_selector form_control">
            <option  value="md5">MD5</option>
            <option  value="sha1">SHA1</option>
            <option  value="sha256">SHA256</option>
        </select>
        <br>
        <br>
        <span class="calc_text">&nbsp;(</span>
        <input class="form_control" type="text"  id ="signature_apikey_response_page" name = "signature_apikey_response_page" placeholder="ApiKey" maxlength="26"> ~
        <input class="form_control number" type="text"  id ="signature_merchanId_response_page" name = "signature_merchanId_response_page" placeholder="MerchantId" maxlength="7"> ~
        <input class="form_control" type="text"  id ="signature_referenceCode_response_page" name = "signature_referenceCode_response_page" placeholder="Referencia" maxlength="255"> ~
        <input class="form_control  number" type="text" id ="signature_amount_response_page" name = "signature_amount_response_page" placeholder="Valor" maxlength="14"> ~
        <select id = "signature_currency_response_page" class="calc_selector form_control" >
            <option  value="USD">USD</option>
            <option  value="COP">COP</option>
            <option  value="MXN">MXN</option>
            <option  value="ARS">ARS</option>
            <option  value="PEN">PEN</option>
            <option  value="BRL">BRL</option>
            <option  value="CLP">CLP</option>
        </select> ~
        <select id = "signature_transaction_state_response_page" class="calc_selector form_control" >
            <option  value="4">4 (Aprovada)</option>
            <option  value="6">6 (Rejeitada)</option>
            <option  value="104">104 (Erro)</option>
            <option  value="5">5 (Expirada)</option>
            <option  value="7">7 (Pendente)</option>
        </select>
        <span class="calc_text">)</span>
        <br>
        <br>
        <br>
        <span class="blue-text-13"><b>Resultado:&nbsp;</b></span><input class="form_control" id ="signature_generated_response_page" name = "signature_generated_response_page" value = ""  readonly />
    </table>
    <br>
    <table width="50%"  border="0" cellspacing="2" cellpadding="2">
        <input type="button" name="signature_generate_response_page" id="signature_generate_response_page" value="Gerar assinatura" >
        <input type="button" name="signature_generate_again_response_page" id="signature_generate_again_response_page" value="Gerar nova assinatura" >
    </table>
</form>
</div>
</span>
</div>
<!-- Fin del generador de firmas pagina de respuesta-->

</div>
<!--fin pagina de respuesta -->
<div id="squelch-taas-tab-content-3">

<!--pagina de confirmacion -->
<div id="pagina-confirmacion" class="payu-fragment">
<span class="subtitle-page">Página de confirmação</span>
<span class="grey-text-13">A página de confirmação permite que você atualize as bases de dados do seu sistema; por isto, não deve incluir código HTML já que nunca será visível ao comprador. Esta página é opcional; quando uma transação é finalizada, ou seja, quando se aprova, se recusa ou quando é cancelada, nossa plataforma envia as variáveis por meio do método HTTP POST.</span>
<br/>
<span class="grey-text-13">Na página de confirmação, você deve realizar a captura dos dados que se desejam guardar na base de dados. Esta captura dependerá da linguagem de programação utilizada.</span>
</div>

<div id="blue-box">
<div id="info-box">Ter em conta:</div>
<ol>

<li class="bullet-box">Se você restringiu o site com "basic access authentication" ou algo semelhante, desativá-lo pra url de confirmação.</li>
<li class="bullet-box">O IP associado à URL de confirmação deve ser pública; nenhum acesso de intranet ou localhost.</li>
<li class="bullet-box">Se você estiver usando https, você deve certificar-se de que você tem um certificado válido.</li>
<li class="bullet-box">Temporariamente não utilize certificados de segurança de curva elíptica ou aqueles que possuam o conjunto de codificação TLS_ECDHE_ECDSA_WITH_RC4_128_SHA nas suas solicitações de pagamento.</li>
<li class="bullet-box">PayU assumirá que a página de confirmação é reportada corretamente se o sistema receber o código HTTP 200; caso contrário, PayU fará nove (9) tentativas para enviar a página de confirmação para o seu sistema. Se após essas tentativas, o código HTTP 200 não o é recebido, o sistema envia um alerta de e-mail.</li>
<li class="bullet-box">PayU reportará a página de confirmação uma vez que a transação tiver um estado final, ou seja, quando aprovado, rejeitado ou expirado. Se uma transação está em andamento (aguardando pagamento ou análise), não se reportará até ter um status final.</li>
</ol>
</div>

&nbsp;<br>

<div class="squelch-taas-toggle squelch-taas-override" data-speed="800" data-active="" data-theme="jqueryui" >
<h3 >
<a href="">
Variáveis que são enviadas para a página de confirmação</a></h3><div class="squelch-taas-toggle-shortcode-content" >
<table class="table-d" >
<tr bgcolor="#696a6c">
<td><span style="color: #fff; font-weight: bold;">Campo</span></td>
<td><span style="color: #fff; font-weight: bold;">Tipo</span></td>
<td><span style="color: #fff; font-weight: bold;">Tamanho</span></td>
<td><span style="color: #fff; font-weight: bold;">Descrição</span></td>
</tr>
<tr>
<td width="181"><em>merchant_id </em></td>
<td width="185">Numérico</td>
<td style="text-align: center;" width="63">12</td>
<td width="648">É o número identificador da loja no sistema da PAYU, este número você encontrará no e-mail de criação da conta.</td>
</tr>
<tr>
<td width="181"><em><a class="green-link" href="{{ site.baseurl }}/pt/web_checkout/variables.html?opened_div=02">state_pol</a></em></td>
<td width="185">Alfa numérico</td>
<td style="text-align: center;" width="63">32</td>
<td width="648">Indica o estado da transação no sistema.</td>
</tr>
<tr>
<td width="181"><em>risk</em></td>
<td width="185">Decimal (#.00)</td>
<td style="text-align: center;" width="63">&#8212;</td>
<td width="648">O risco associado à transação. Toma o valor entre 0 e 1. O maior risco, maior valor. Está no formato ###.00 </td>
</tr>
<tr>
<td width="181"><em><a class="green-link" href="{{ site.baseurl }}/pt/web_checkout/variables.html?opened_div=02">response_code_pol</a></em></td>
<td width="185">Alfa numérico</td>
<td style="text-align: center;" width="63">255</td>
<td width="648">O código de resposta da PAYU.</td>
</tr>
<tr>
<td width="181"><em>reference_sale</em></td>
<td width="185">Alfa numérico</td>
<td style="text-align: center;" width="63">255</td>
<td width="648">É a referencia da venda do pedido. Deve ser único para cada transação que é enviada ao sistema.</td>
</tr>
<tr>
<td width="181"><em>reference_pol</em></td>
<td width="185">Alfa numérico</td>
<td style="text-align: center;" width="63">255</td>
<td width="648">A referência ou número da transação gerado na PAYU.</td>
</tr>
<tr>
<td width="181"><em>sign</em></td>
<td width="185">Alfa numérico</td>
<td style="text-align: center;" width="63">255</td>
<td width="648">É a assinatura digital criada para cada uma das transações.</td>
</tr>
<tr>
<td width="181"><em>extra1</em></td>
<td width="185">Alfa numérico</td>
<td style="text-align: center;" width="63">255</td>
<td width="648">Campo adicional para enviar informação sobre a compra. Ex. Descrição da compra caso ele queira visualizá-la na página de resposta.</td>
</tr>
<tr>
<td width="181"><em>extra2</em></td>
<td width="185">Alfa numérico</td>
<td style="text-align: center;" width="63">255</td>
<td width="648">Campo adicional para enviar informação sobre a compra. Ex. Códigos internos dos produtos.</td>
</tr>
<tr>
<td width="181"><em>payment_method</em></td>
<td width="185">Numérico</td>
<td style="text-align: center;" width="63">&#8212;</td>
<td width="648">O identificador interno do meio de pagamento utilizado.</td>
</tr>
<tr>
<td width="181"><em><a class="green-link" href="{{ site.baseurl }}/pt/web_checkout/variables.html?opened_div=08">payment_method_type</a></em></td>
<td width="185">Numérico</td>
<td style="text-align: center;" width="63">&#8212;</td>
<td width="648">O tipo de meio de pagamento utilizado para o pagamento.</td>
</tr>
<tr>
<td width="181"><em>installments_number</em></td>
<td width="185">Numérico</td>
<td style="text-align: center;" width="63">&#8212;</td>
<td width="648">Número de parcelas nas quais foi diferido o pagamento com cartão de crédito.</td>
</tr>
<tr>
<td width="181"><em>value</em></td>
<td width="185">Numérico</td>
<td style="text-align: center;" width="63">14,2</td>
<td width="648">É a quantidade total da transação. Pode conter dois dígitos decimais. Ex. 10000.00 ou 10000 </td>
</tr>
<tr>
<td width="181"><em>tax</em></td>
<td width="185">Numérico</td>
<td style="text-align: center;" width="63">14,2</td>
<td width="648">É o valor do  IVA da transação, se não é enviado o  IVA nulo o sistema aplicará  19% automaticamente. Pode conter dois dígitos decimais. Ex: 19000.00. Caso não tenha IVA deve ser enviado como  0.</td>
</tr>
<tr>
<td width="181"><em>additional_value</em></td>
<td width="185">Numérico</td>
<td style="text-align: center;" width="63">14,2</td>
<td width="648">Valor Adicional não comissionável.</td>
</tr>
<tr>
<td width="181"><em>transaction_date</em></td>
<td width="185">Fecha (YYYY-MM-DD HH:mm:ss)</td>
<td style="text-align: center;" width="63">&#8212;</td>
<td width="648">A data em que se realizou a transação.</td>
</tr>
<tr>
<td width="181"><em><a class="green-link" href="{{ site.baseurl }}/pt/web_checkout/variables.html?opened_div=06">currency</a></em></td>
<td width="185">Alfa numérico</td>
<td style="text-align: center;" width="63">3</td>
<td width="648">A moeda respectiva na qual se realizou o pagamento. O processo de conciliação é feito em pesos na taxa representativa do dia.</td>
</tr>
<tr>
<td width="181"><em>email_buyer</em></td>
<td width="185">Alfa numérico</td>
<td style="text-align: center;" width="63">255</td>
<td width="648">Campo que contém e-mail do comprador para notificá-lo da transação pelo e-mail. Recomenda-se que seja feita uma validação para ver se este dado é tomado em um formulário. </td>
</tr>
<tr>
<td width="181"><em>cus</em></td>
<td width="185">Alfa numérico</td>
<td style="text-align: center;" width="63">64</td>
<td width="648">O cus, código único de seguimento, é a referência do pagamento dentro do Banco, aplicável somente para pagamentos com PSE.</td>
</tr>
<tr>
<td width="181"><em>pse_bank</em></td>
<td width="185">Alfa numérico</td>
<td style="text-align: center;" width="63">255</td>
<td width="648">O nome do banco, aplicável para pagamentos com PSE.</td>
</tr>
<tr>
<td width="181"><em>test</em></td>
<td width="185">Lógico (true, false)</td>
<td style="text-align: center;" width="63">&#8212;</td>
<td width="648">Variável para poder identificar se a operação foi um teste.</td>
</tr>
<tr>
<td width="181"><em>description</em></td>
<td width="185">Alfa numérico</td>
<td style="text-align: center;" width="63">255</td>
<td width="648">É a descrição da venda.</td>
</tr>
<tr>
<td width="181"><em>billing_address</em></td>
<td width="185">Alfa numérico</td>
<td style="text-align: center;" width="63">255</td>
<td width="648">O endereço do faturamento.</td>
</tr>
<tr>
<td width="181"><em>shipping_address</em></td>
<td width="185">Alfa numérico</td>
<td style="text-align: center;" width="63">50</td>
<td width="648">O endereço de entrega da mercadoria. </td>
</tr>
<tr>
<td width="181"><em>phone</em></td>
<td width="185">Alfa numérico</td>
<td style="text-align: center;" width="63">20</td>
<td width="648">O número de telefone residencial do comprador.</td>
</tr>
<tr>
<td width="181"><em>office_phone</em></td>
<td width="185">Alfa numérico</td>
<td style="text-align: center;" width="63">20</td>
<td width="648">O número de telefone diurno do comprador.</td>
</tr>
<tr>
<td valign="bottom" width="181"><em>account_number_ach</em></td>
<td width="185">Alfa numérico</td>
<td style="text-align: center;" width="63">36</td>
<td width="648">Identificador da transação.</td>
</tr>
<tr>
<td valign="bottom" width="181"><em>account_type_ach</em></td>
<td width="185">Alfa numérico</td>
<td style="text-align: center;" width="63">36</td>
<td width="648">Identificador da transação.</td>
</tr>
<tr>
<td valign="bottom" width="181"><em>administrative_fee</em></td>
<td width="185">Decimal (#.00)</td>
<td style="text-align: center;" width="63">&#8212;</td>
<td width="648">Valor da tarifa administrativa</td>
</tr>
<tr>
<td valign="bottom" width="181"><em>administrative_fee_base</em></td>
<td width="185">Decimal (#.00)</td>
<td style="text-align: center;" width="63">&#8212;</td>
<td width="648">Valor base da tarifa administrativa</td>
</tr>
<tr>
<td valign="bottom" width="181"><em>administrative_fee_tax</em></td>
<td width="185">Decimal (#.00)</td>
<td style="text-align: center;" width="63">&#8212;</td>
<td width="648">Valor do imposto da tarifa administrativa</td>
</tr>
<tr>
<td valign="bottom" width="181"><em>airline_code</em></td>
<td width="185">Alfa numérico</td>
<td style="text-align: center;" width="63">4</td>
<td width="648">Código da companhia aérea</td>
</tr>
<tr>
<td valign="bottom" width="181"><em>attempts</em></td>
<td width="185">Numérico</td>
<td style="text-align: center;" width="63">&#8212;</td>
<td width="648">Numero tentativas de envio da confirmação.</td>
</tr>
<tr>
<td valign="bottom" width="181"><em>authorization_code</em></td>
<td width="185">Alfa numérico</td>
<td style="text-align: center;" width="63">12</td>
<td width="648">Código de autorização da venda</td>
</tr>
<tr>
<td valign="bottom" width="181"><em>bank_id</em></td>
<td width="185">Alfa numérico</td>
<td style="text-align: center;" width="63">255</td>
<td width="648">Identificador do banco</td>
</tr>
<tr>
<td valign="bottom" width="181"><em>billing_city</em></td>
<td width="185">Alfa numérico</td>
<td style="text-align: center;" width="63">255</td>
<td width="648">A cidade do faturamento.</td>
</tr>
<tr>
<td valign="bottom" width="181"><em>billing_country</em></td>
<td width="185">Alfa numérico</td>
<td style="text-align: center;" width="63">2</td>
<td width="648">O código ISO do país do faturamento .</a>
</td>
</tr>
<tr>
<td valign="bottom" width="181"><em>commision_pol</em></td>
<td width="185">Decimal (#.00)</td>
<td style="text-align: center;" width="63">&#8212;</td>
<td width="648">Valor da comissão.</td>
</tr>
<tr>
<td valign="bottom" width="181"><em>commision_pol_currency</em></td>
<td width="185">Alfa numérico</td>
<td style="text-align: center;" width="63">3</td>
<td width="648">Moeda da comissão.</td>
</tr>
<tr>
<td valign="bottom" width="181"><em>customer_number</em></td>
<td width="185">Numérico</td>
<td style="text-align: center;" width="63">&#8212;</td>
<td width="648">Número do cliente.</td>
</tr>
<tr>
<td valign="bottom" width="181"><em>date</em></td>
<td width="185">Fecha (YYYY-MM-DD HH:mm:ss)</td>
<td style="text-align: center;" width="63">&#8212;</td>
<td width="648">Data da operação.</td>
</tr>
<tr>
<td valign="bottom" width="181"><em>error_code_bank</em></td>
<td width="185">Alfa numérico</td>
<td style="text-align: center;" width="63">255</td>
<td width="648">Código de erro do banco.</td>
</tr>
<tr>
<td valign="bottom" width="181"><em>error_message_bank</em></td>
<td width="185">Alfa numérico</td>
<td style="text-align: center;" width="63">255</td>
<td width="648">Mensagem de erro do banco</td>
</tr>
<tr>
<td valign="bottom" width="181"><em>exchange_rate</em></td>
<td width="185">Decimal (#.00)</td>
<td style="text-align: center;" width="63">&#8212;</td>
<td width="648">Valor de taxa do câmbio.</td>
</tr>
<tr>
<td valign="bottom" width="181"><em>ip</em></td>
<td width="185">Alfa numérico</td>
<td style="text-align: center;" width="63">39</td>
<td width="648">Endereço ip de onde foi realizada a transação.</td>
</tr>
<tr>
<td valign="bottom" width="181"><em>nickname_buyer</em></td>
<td width="185">Alfa numérico</td>
<td style="text-align: center;" width="63">150</td>
<td width="648">Nome curto do comprador.</td>
</tr>
<tr>
<td valign="bottom" width="181"><em>nickname_seller</em></td>
<td width="185">Alfa numérico</td>
<td style="text-align: center;" width="63">150</td>
<td width="648">Nome curto do vendedor.</td>
</tr>
<tr>
<td valign="bottom" width="181"><em><a class="green-link" href="{{ site.baseurl }}/pt/web_checkout/variables.html?opened_div=08">payment_method_id</a></em></td>
<td width="185">Numérico</td>
<td style="text-align: center;" width="63">&#8212;</td>
<td width="648">Identificador do meio de pagamento.</td>
</tr>
<tr>
<td valign="bottom" width="181"><em>payment_request_state</em></td>
<td width="185">Alfa numérico</td>
<td style="text-align: center;" width="63">32</td>
<td width="648">Estado da solicitação de pagamento.</td>
</tr>
<tr>
<td width="181"><em>pseReference1</em></td>
<td valign="top" width="185">Alfa numérico</td>
<td style="text-align: center;" valign="top" width="63">255</td>
<td valign="top" width="648">Referência no. 1 para pagamentos com PSE.</td>
</tr>
<tr>
<td width="181"><em>pseReference2</em></td>
<td valign="top" width="185">Alfa numérico</td>
<td style="text-align: center;" valign="top" width="63">255</td>
<td valign="top" width="648">Referência no. 2 para pagamentos com PSE.</td>
</tr>
<tr>
<td width="181"><em>pseReference3</em></td>
<td valign="top" width="185">Alfa numérico</td>
<td style="text-align: center;" valign="top" width="63">255</td>
<td valign="top" width="648">Referência no. 3 para pagamentos com PSE.</td>
</tr>
<tr>
<td valign="bottom" width="181"><em><a class="green-link" href="{{ site.baseurl }}/pt/web_checkout/variables.html?opened_div=02">response_message_pol</a></em></td>
<td width="185">Alfa numérico</td>
<td style="text-align: center;" width="63">255</td>
<td width="648"> A mensagem de resposta da PAYU.</td>
</tr>
<tr>
<td valign="bottom" width="181"><em>shipping_city</em></td>
<td width="185">Alfa numérico</td>
<td style="text-align: center;" width="63">50</td>
<td width="648">A cidade de entrega da mercadoria.</td>
</tr>
<tr>
<td valign="bottom" width="181"><em>shipping_country</em></td>
<td width="185">Alfa numérico</td>
<td style="text-align: center;" width="63">2</td>
<td width="648">O código ISO do país de entrega da mercadoria.</td>
</tr>
<tr>
<td valign="bottom" width="181"><em>transaction_bank_id</em></td>
<td width="185">Alfa numérico</td>
<td style="text-align: center;" width="63">255</td>
<td width="648">Identificador da transação no sistema do banco.</td>
</tr>
<tr>
<td valign="bottom" width="181"><em>transaction_id</em></td>
<td width="185">Alfa numérico</td>
<td style="text-align: center;" width="63">36</td>
<td width="648">Identificador da transação.</td>
</tr>

<tr>
<td valign="bottom" width="181"><em>payment_method_name</em></td>
<td width="185">Alfa numérico</td>
<td style="text-align: center;" width="63">255</td>
<td width="648">Meio de pagamento com o qual foi feito o pagamento, por exemplo, VISA.</td>
</tr>

</table>
</div></div>


<div class="squelch-taas-toggle squelch-taas-override" data-speed="800" data-active="" data-theme="jqueryui" >
<h3 >
<a href="">Exemplo GET enviado na página de confirmação.</a>
</h3>
<div class="squelch-taas-toggle-shortcode-content" >
<pre style="overflow: auto;">
response_code_pol=5
phone=
additional_value=0.00
test=1
transaction_date=2015-05-27 13:07:35
cc_number=************0004
cc_holder=test_buyer
error_code_bank=
billing_country=CO
bank_referenced_name=
description=test_payu_01
administrative_fee_tax=0.00
value=100.00
administrative_fee=0.00
payment_method_type=2
office_phone=
email_buyer=test@payulatam.com
response_message_pol=ENTITY_DECLINED
error_message_bank=
shipping_city=
transaction_id=f5e668f1-7ecc-4b83-a4d1-0aaa68260862
sign=e1b0939bbdc99ea84387bee9b90e4f5c
tax=0.00
payment_method=10
billing_address=cll 93
payment_method_name=VISA
pse_bank=
state_pol=6
date=2015.05.27 01:07:35
nickname_buyer=
reference_pol=7069375
currency=USD
risk=1.0
shipping_address=
bank_id=10
payment_request_state=R
customer_number=
administrative_fee_base=0.00
attempts=1
merchant_id=508029
exchange_rate=2541.15
shipping_country=
installments_number=1
franchise=VISA
payment_method_id=2
extra1=
extra2=
antifraudMerchantId=
extra3=
nickname_seller=
ip=190.242.116.98
airline_code=
billing_city=Bogota
pse_reference1=
reference_sale=2015-05-27 13:04:37
pse_reference3=
pse_reference2=
</pre>
</div>
</div>
<div id="blue-box">
<span class="grey-text-13">
<span class="blue-text-13">Nota:</span>
<br/>
Se o seu modelo de negócios está sujeito a inventário ou reservas, recomendamos que use a API de consulta como um mecanismo alternativo de confirmação: <a href="{{ site.baseurl }}/pt/api/queries.html" class="green-link">API</a> ou <a href="{{ site.baseurl }}/pt/sdk/queries.html" class="green-link">SDK</a>.
</span>
</div>
<br/>
<br/>
<span class="blue-text-13"><b>Validação da assinatura</b></span></br></br>
<span class="grey-text-13">A validação da assinatura permite comprovar a integridade dos dados, você deverá gerar a assinatura com os dados encontrados na página de confirmação e compará-la com a informação do parâmetro sign.<br>
Para validar a assinatura na página de confirmação você deve levar em conta:</span></br></br>
<ol>
<li class="bullet-box">Se o segundo decimal do parâmetro value for zero, exemplo: 150.00<br>
O novo valor new_value para gerar a assinatura deve ser colocado somente um decimal assim: 150.0</li>
<li class="bullet-box">Se o segundo decimal do parâmetro value for diferente de zero, por exemplo: 150.26<br>
O novo valor new_value para gerar a assinatura deve ser colocado com dois decimais assim: 150.26.</li>
<li class="bullet-box">Os parâmetros para gerar a assinatura merchant_id, reference_sale, value, currency e state_pol devem ser obtidos na página de confirmação, e não de seu banco de dados.</li>
<li class="bullet-box">Você deve ter armazenada sua ApiKey de forma segura.</li>
<li class="bullet-box">Esquema da assinatura:
<pre>
"ApiKey~merchant_id~reference_sale~new_value~currency~state_pol"
</pre>
Ejemplos:
<div class="squelch-taas-toggle squelch-taas-override" data-speed="800" data-active="" data-theme="jqueryui" >
<h3 >
<a href="">
Com um decimal</a></h3><div class="squelch-taas-toggle-shortcode-content" >
<span class="grey-text-13">Tu apiKey: 4Vj8eK4rloUd272L48hsrarnUA</span>
<span class="grey-text-13">Parâmetros obtidos na página de confirmação:<br>
merchant_id = 508029<br>
reference_sale = TestPayU04<br>
value = 150.00<br>
currency = USD<br>
state_pol = 6<br>
sign = df67936f918887b2aa31688a77a10fe1</span>
<span class="grey-text-13">A assinatura é gerada da seguinte forma:</span>
<span class="blue-text-13">MD5(4Vj8eK4rloUd272L48hsrarnUA~508029~TestPayU04~150.0~USD~6) = <b>df67936f918887b2aa31688a77a10fe1</b></span>
</div></div>
<div class="squelch-taas-toggle squelch-taas-override" data-speed="800" data-active="" data-theme="jqueryui" >
<h3>
<a href="">
Com dois decimais</a></h3><div class="squelch-taas-toggle-shortcode-content" >
<span class="grey-text-13">Tu apiKey: 4Vj8eK4rloUd272L48hsrarnUA</span>
<span class="grey-text-13">Parâmetros obtidos na página de confirmação:<br>
merchant_id = 508029<br>
reference_sale = TestPayU05<br>
value = 150.26<br>
currency = USD<br>
state_pol = 4<br>
sign = 1d95778a651e11a0ab93c2169a519cd6</span>
<span class="grey-text-13">A assinatura é gerada da seguinte forma:</span>
<span class="blue-text-13">MD5(4Vj8eK4rloUd272L48hsrarnUA~508029~TestPayU05~150.26~USD~4) = <b>1d95778a651e11a0ab93c2169a519cd6</b></span>
</div></div>

<!-- Generador de firmas pagina de confirmación -->
<div id="blue-box">
<span class="subtitle-page">Compare a sua assinatura</span>
<br>
<br>
<span class="grey-text-13">
<div>
<form method="POST" id="signature_form_confirmation_page" >
    <table>
        <span class="blue-text-13"><b>Algoritmo: &nbsp;</b></span>
        <select id = "signature_algorithm_confirmation_page" class="calc_selector form_control">
            <option  value="md5">MD5</option>
            <option  value="sha1">SHA1</option>
            <option  value="sha256">SHA256</option>
        </select>
        <br>
        <br>
        <span class="calc_text">&nbsp;(</span>
        <input class="form_control" type="text"  id ="signature_apikey_confirmation_page" name = "signature_apikey_confirmation_page" placeholder="ApiKey" maxlength="26"> ~
        <input class="form_control number" type="text"  id ="signature_merchanId_confirmation_page" name = "signature_merchanId_confirmation_page" placeholder="MerchantId" maxlength="7"> ~
        <input class="form_control" type="text"  id ="signature_referenceCode_confirmation_page" name = "signature_referenceCode_confirmation_page" placeholder="Referencia" maxlength="255"> ~
        <input class="form_control  number" type="text" id ="signature_amount_confirmation_page" name = "signature_amount_confirmation_page" placeholder="Valor" maxlength="14"> ~
        <select id = "signature_currency_confirmation_page" class="calc_selector form_control" >
            <option  value="USD">USD</option>
            <option  value="COP">COP</option>
            <option  value="MXN">MXN</option>
            <option  value="ARS">ARS</option>
            <option  value="PEN">PEN</option>
            <option  value="BRL">BRL</option>
            <option  value="CLP">CLP</option>
        </select> ~
        <select id = "signature_state_pol_confirmation_page" class="calc_selector form_control" >
            <option  value="4">4 (Aprovada)</option>
            <option  value="6">6 (Rejeitada)</option>
            <option  value="5">5 (Expirada)</option>
        </select>
        <span class="calc_text">)</span>
        <br>
        <br>
        <br>
        <span class="blue-text-13"><b>Resultado:&nbsp;</b></span><input class="form_control" id ="signature_generated_confirmation_page" name = "signature_generated_confirmation_page" value = ""  readonly />
    </table>
    <br>
    <table width="50%"  border="0" cellspacing="2" cellpadding="2">
        <input type="button" name="signature_generate_confirmation_page" id="signature_generate_confirmation_page" value="Gerar assinatura" >
        <input type="button" name="signature_generate_again_confirmation_page" id="signature_generate_again_confirmation_page" value="Gerar nova assinatura" >
    </table>
</form>
</div>
</span>
</div>
<!-- Fin del generador de firmas pagina de confirmación-->


<br/>

<span class="blue-text-13"><b>Retentaivas de pagamento</b></span><br/><br/>
<span class="grey-text-13">Quando uma transação é rejeitada, o pagador vai ter a opção de tentar novamente pagando pelo mesmo meio de pagamento ou de outro, Portanto, tenha em mente que, para cada tentativa, será feita a chamada para a página de confirmação com o estado correspondente da transação.
<br>
<br>
Cada uma dessas chamadas serão feitas com o mesmo número de referência  de pagamento (reference_sale) e com o mesmo identificador de ordem (reference_pol), mas com identificador de transação diferente (transaction_id). Portanto, você pode receber várias chamadas para a página de confirmação para a mesma venda.
<br>
<br>
Aqui, um exemplo de uma tentativa de rejeitada e sua retentativa aprovada:

<pre>
reference_sale=2015-05-27 13:04:37
reference_pol=7069375
transaction_id=f5e668f1-7ecc-4b83-a4d1-0aaa68260862
state_pol=6

reference_sale=2015-05-27 13:04:37
reference_pol=7069375
transaction_id=01cfdce8-68d5-4a4c-aabf-d89370a0b92f
state_pol=4
</pre>


Observe que, se uma daquelas chamadas para a página de confirmação indica que uma referência de pagamento (reference_sale) foi aprovado, você pode estar certo que você não receberá mais chamadas para a mesma referência.
</span>


</div>
</div>
</div>

</div>
</div>
</div>
